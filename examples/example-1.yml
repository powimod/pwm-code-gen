name: "test-1"

attributes:
  - name: "description"
    value: "My test project"
  - name: "version"
    value: "0.0.1"
  - name: "licence"
    value: "GPL-V2 (or later)"


datatypes:
  - name : "dayOfWeek"
    type: "enumeration"
    values:
      - value: "Monday"
      - value: "Tuesday"
      - value: "Wednesday"
      - value: "Thursday"
      - value: "Friday"
      - value: "Saturday"
      - value: "Sunday"

objects:

  - name: "rendezvous"
    properties:
      - name: "day"
        type: "dayOfWeek"

  - name: "EquipmentFamily"
    attributes:
      - name: "description"
        value: "Family of equipements"
      - name: "filename"
        value: "equipment-family"
    properties:
      - name: "id"
        type: "uuid"
      - name: "name"
        type: "string"
      - name: "description"
        type: "string"
        mandatory: false
      - name: "equipmentTypeCount"
        type: "integer"
      - name: "equipmentCount"
        type: "integer"
    indexes:
      - name: "name"
        keys:
          - property: "name"

       
  - name: "EquipmentType"
    attributes:
      - name: "description"
        value: "Type of equipements"
      - name: "filename"
        value: "equipmentType"
    properties:
      - name: "id"
        type: "uuid"
      - name: "name"
        type: "string"
      - name: "description"
        type: "string"
      - name: "equipmentCount"
        type: "integer"
    links:
      - name : "family"
        target: "EquipmentFamily"
        mandatory: true
    indexes:
      - name: "family+name"
        unique: true
        keys:
          - link : "family"
          - property: "name"
 
  - name: "Equipment"
    attributes:
      - name: "filename"
        value: "equipment"
    properties:
      - name: "id"
        type: "uuid"
      - name: "name"
        type: "string"
      - name: "description"
        type: "string"
    links:
      - name: "type"
        target: "EquipmentType"
      - name: "section"
        target: "UnitSection"
        mandatory: false
    indexes:
      - name: "type+name"
        unique: true
        keys:
          - link : "type"
          - property: "name"
      - name: "section+name"
        unique: false
        keys:
          - link : "section"
          - property: "name"


  - name: "Company"
    attributes:
      - name: "description"
        value: "The company"
      - name: "filename"
        value: "company"
    properties:
      - name: "name"
        type: "string"
      - name: "address"
        type: "text"
      - name: "unitCount"
        type: "integer"
      - name: "sectionCount"
        type: "integer"
      - name: "equipmentCount"
        type: "integer"
    indexes:
      - name: "name"
        unique: true
        keys:
          - property : "name"


  - name: "Unit"
    attributes:
      - name: "description"
        value: "building, factories, storerooms, warehous, etc"
      - name: "filename"
        value: "unit"
    properties:
      - name: "id"
        type: "uuid"
      - name: "name"
        type: "string"
      - name: "description"
        type: "string"
      - name: "sectionCount"
        type: "integer"
      - name: "equipmentCount"
        type: "integer"
    links:
      - name: "company"
        target: "Company"
    indexes:
      - name: "unit+name"
        unique: true
        keys:
          - link: "company"
          - property : "name"

  - name: "UnitSection"
    attributes:
      - name: "description"
        value: "Part of a unit (room, local, etc)"
      - name: "filename"
        value: "unit-section"
    properties:
      - name: "id"
        type: "uuid"
      - name: "name"
        type: "string"
      - name: "description"
        type: "string"
      - name: "equipmentCount"
        type: "integer"
    links:
      - name: "unit"
        target: "Unit"
    indexes:
      - name: "unit+name"
        unique: true
        keys:
          - link : "unit"
          - property : "name"
 

  - name: "Person"
    attributes:
      - name: "description"
        value: "Person working in the company"
      - name: "filename"
        value: "person"
    properties:
      - name: "id"
        type: "id"
      - name: "firstname"
        type: "string"
      - name: "lastname"
        type: "string"
      - name: "email"
        type: "string"
      - name: "password"
        type: "string"
        attributes:
          minimum-length: 8
          maximum-length: 20 
          secret: true
    links:
      - name: "company"
        target: "Company"
    indexes:
      - name: "lastname+firstname"
        unique: true
        keys:
          - property : "lastname"
          - property : "firstname"
 
files:
  - scope:  "project"
    input:  "examples/example-1-index.html"
    output: "output/index.html"

  - scope:  "object"
    input:  "examples/example-1-object.html"
    output: "output/{{object.attributes.filename }}.html"


